<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>ApoTakeCare - Products Page</title>
	<link rel="stylesheet" href="/pico.jade.min.css">
	<link rel="stylesheet" href="/ShowProductModalStyle.css">
	<script type="text/javascript" src="/showModal.js" defer></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<main class="container">

	<h1>All our marvelous product :</h1>	
	<h5>(Click on a row)</h5>
	<button href="/addNewProduct">Add a new Product</button>
	
	<table>		
		<thead>
	        <tr>
	            <th>ID</th>
	            <th>Product Name</th>
	            <th>Other Name(s)</th>
	            <th>Description</th>
	            <th>Shelf Number</th>
	        </tr>
    	</thead>
    	<tbody>
    		<!-- TODO : trouver une manière ptetre un peu mieux que tout passer les data-x un à un 
    		(surtout si on veut aussi recup le Stock et les Effects&Prep liés) -->
	    	<tr id="aProductRow"
	    		th:each="product : ${products}" 
	    		th:data-id="${product.id}"  
	    		th:data-type="${product.type}" 
    			th:data-name="${product.name}" 
    			th:data-otherNames="${product.otherNames}" 
    			th:data-picLink="${product.picLink}" 
    			th:data-description="${product.description}" 
    			th:data-stock="${product.stock != null ? product.stock.shelfNumber : ''}" 
	    		onclick=showModalOneProduct(this)>
	    		
	    		
				<td th:text="${product.id}">XXX</td>
				<td th:text="${product.name}">(NAME)</td>
				<td>
					<ul>
						<li th:each="item : ${product.otherNames}" th:text="${item}">(OTHER NAMES)</li>
					</ul>
				</td>
				<td th:text="${product.description}">(DESCRIPT)</td>
				<td th:text="${product.stock != null ? product.stock.shelfNumber : ''}">(ShelfNumber)</td>
			</tr>
    	</tbody>		
	</table>
	
	<!-- Show One Product : -->
	<div id="modalBackground" onclick="closeModal()"></div> 
	
	<div id="productModal"> 
		<img id="ProductTypeIcon" >	
		<span class="close-button" onclick="closeModal()"><img src="/img/closeIcon.png" ></span>	

		<h3> <span id="modalId">Id</span> | <span id="modalName">Product Name</span> </h3>
		<h5 id="modalOtherNames"></h5>
		<img id="modalImage">
		<p><strong>Description : </strong> <span id="modalDescription"></span></p>
		<hr>
		<p><strong>Shelf : </strong> <span id="modalShelfNumber"></span></p>
		<hr>
		<h5>List of Effects & Preparations : </h5>
		
	</div>
	
	
</main>
</body>
</html>