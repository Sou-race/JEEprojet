<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<title>ApoTakeCare - Products Page</title>
	<link rel="stylesheet" href="/pico.jade.min.css">
	<link rel="stylesheet" href="/general.css">
	<link rel="stylesheet" href="/ShowProductModalStyle.css">
	<script type="text/javascript" src="/showModal.js" defer></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
    body {
        margin: 0;
        padding: 0;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
    }

    .card {
        border: none;
        border-radius: 10px;
        box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        background-color: #2c2c2c;
        padding: 1.5rem;
        transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease !important;
    }

    .card:hover {
    	background-color: #5D5E5D;
        transform: translateY(-8px) !important;
        box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.3);
    }

    .card header {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        transition: color 0.3s ease !important;
    }

    .card p {
        font-size: 1rem;
        margin-bottom: 1rem;
        transition: color 0.3s ease !important;
    }
    
    .card ul {
        list-style-type: none;
        padding: 0;
        margin-bottom: 1rem;
    }

    .card ul li {
        font-size: 0.9rem;
    }

    .card button {
        background-color: #2a9d8f;
        color: #fff;
        border: none;
        border-radius: 5px;
        padding: 0.5rem 1rem;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.5s ease-out !important;
    }

    .card button:hover {
    	transition: all 0.5s ease-out !important;
        background-color: #21867a;
        transform: translateY(-2px);
    }

    .footer {
        text-align: center;
        padding: 1rem;
        background-color: #333;
        color: #fff;
        margin-top: 2rem;
    }
</style>

</head>

<body>

<main class="container">
	
	<!-- Header : -->	
	<div th:replace="~{frag :: header}"></div>
	
	<h1>All our marvelous product :</h1>	
	<button>Add a new Product</button>	
	 
	
	<!--  Show all Products :  -->
<div class="grid">
        <div th:each="product : ${products}" class="card">
            <header>
                <h2 th:text="${product.name}">Product name</h2>
            </header>
            <p th:text="${product.description}">Product description</p>
            <ul>
                <li th:each="item : ${product.otherNames}" th:text="${item}">(Other Names)</li>
            </ul>
            <footer>
                <button class="secondary" th:onclick="|window.location.href='/products/' + ${product.id}|">
                    <i class="fa fa-eye"></i> Details
                </button>
            </footer>
        </div>
    </div>
	
	
	
	
	<!-- Show One Product : -->
	
	<div class="modalBackground" th:if="${selectedProduct}" onclick="window.location.href='/products'"></div>

	<div class="productModal" th:if="${selectedProduct}">
	    <span class="close-button" onclick="window.location.href='/products'">
	        <img src="/img/closeIcon.png">
	    </span>
	
	    <div class="productModal_Content">
	        <img th:src="${selectedProduct.type.name() == 'PLANT' ? '/img/plant.png' :
	                     selectedProduct.type.name() == 'WOOD' ? '/img/wood.png' :
	                     selectedProduct.type.name() == 'FUNGUS' ? '/img/fungus.png' :
	                     selectedProduct.type.name() == 'ANIMAL_PART' ? '/img/insect.png' : '/img/other.png'}"
	             class="ProductTypeIcon"
	             th:title="${selectedProduct.type}">
	
	        <h3>
	            <span th:text="${selectedProduct.id}">Id</span> | <span th:text="${selectedProduct.name}">Product Name</span>
	        </h3>        
			
			
	        <h5 th:text="${#strings.arrayJoin(selectedProduct.otherNames.toArray(), ', ')}"></h5>
	        <img class="modalImage" th:src="${selectedProduct.picLink}">
	        <p><strong>Description: </strong> <span th:text="${selectedProduct.description}"></span></p>
			
			
			
			<!-- Liaison STOCK : -->
	        <hr>
	        <div>
	        	<p>
	        		<strong>Shelf: </strong><span th:text="${selectedProduct.stock != null ? 'nÂ° ' + selectedProduct.stock.shelfNumber : 'Unavailable'}"></span>
	        	</p>
	        	<p th:if="${selectedProduct.stock != null && selectedProduct.stock.dosage != null }">
	        		<strong>Quantity : </strong><span th:text="${selectedProduct.stock.dosage.quantity + ' ' + selectedProduct.stock.dosage.unit}"></span>
	        		 | 
	        		 <strong>Price : </strong><span th:text="${selectedProduct.stock.pricePerUnit + ' $ / ' + selectedProduct.stock.dosage.unit}"></span>
	        	</p>
	            
	        </div>
	        
	        
	        <!-- Liaison(s) EFFECT AND PREP : -->
	        <hr>
	        <div>
	        	<h6>Effect(s) and Preparation(s) :</h6>
	        	<div class="anEffect_Modal" th:each="item : ${selectedProduct.possibleEffectsAnfPreparations}">
	        		<h5 th:text="${item.categoryOfThisEffect != null ? item.categoryOfThisEffect.title : 'An effect : '}" ></h5>
	        		<p><strong>Effect : </strong><span th:text="${item.effectDescription}"></span></p>
	        		<p><strong>Preparation : </strong><span th:text="${item.preparationDescription}"></span></p>
	        	</div>	          
	        </div>
	    </div>
	</div>
	
	<!-- FOOTER -->
	<div th:replace="frag :: footer"></div>
</main>
</body>
</html>